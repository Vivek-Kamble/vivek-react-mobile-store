(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{14:function(e,t,a){},22:function(e,t,a){e.exports=a.p+"static/media/login.11da2c66.png"},26:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(3),o=a(4),l=a(2),s=(a(14),"https://vivek-node-mobile-store.herokuapp.com/api"),i=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=function(e,t){return e.location.pathname===t?{color:"#0A79DF"}:{color:"#2C3335"}},u=Object(o.g)((function(e){var t=e.history;return c.a.createElement("div",null,c.a.createElement("ul",{className:"nav nav-tabs bg-white p-2"},c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/"),className:"nav-link",to:"/"},"Home")),c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/cart"),className:"nav-link",to:"/cart"},"Cart")),i()&&0===i().user.role&&c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard"},"Dashboard")),i()&&1===i().user.role&&c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/admin/dashboard"),className:"nav-link",to:"/admin/dashboard"},"Admin Dashboard")),!i()&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/signup"),className:"nav-link",to:"/signup"},"Sign Up")),c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement(r.b,{style:m(t,"/signin"),className:"nav-link",to:"/signin"},"Sign In"))),i()&&c.a.createElement("li",{className:"nav-item font-weight-bold"},c.a.createElement("span",{className:"nav-link text-danger",style:{cursor:"pointer"},onClick:function(){!function(e){if("undefined"!==typeof window)localStorage.removeItem("jwt"),e(),fetch("".concat(s,"/signout"),{method:"GET"}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))}},"Sign Out"))))}));function d(){return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"container-fluid bg-dark text-white text-center py-2"},c.a.createElement("h5",{className:"text-muted"},"A ",c.a.createElement("span",{className:"text-white"},"MERN")," Project by"," ",c.a.createElement("span",{className:"text-white"},c.a.createElement("a",{href:"http://vivek-kamble.github.io/",style:{textDecoration:"none"}},"Vivek Kamble"))),c.a.createElement("h5",null,"If you got any questions, feel free to reach out!")))}var p=function(e){var t=e.title,a=void 0===t?"My Title":t,n=e.className,r=void 0===n?"text-dark p-2":n,o=e.children;return c.a.createElement("div",null,c.a.createElement(u,null),c.a.createElement("div",{className:"container-fluid pt-5"},c.a.createElement("div",{className:"text-dark text-center"},c.a.createElement("h6",{className:"title display-4 text-primary"},a)),c.a.createElement("div",{className:r},o)),c.a.createElement(d,null))},f=(a(33),function(e){var t=e.product,a=t?"".concat(s,"/product/photo/").concat(t._id):"https://www.wildhareboca.com/wp-content/uploads/sites/310/2018/03/image-not-available.jpg";return c.a.createElement("img",{src:a,height:"150px",width:"150px"})}),E=a(1),b=function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(E.a)({},e)),localStorage.setItem("cart",JSON.stringify(a)),t())},h=function(){if(void 0!==typeof window){localStorage.removeItem("cart");localStorage.setItem("cart",JSON.stringify([]))}},g=function(e){var t=e.product,a=e.addToCart,r=void 0===a||a,s=e.removeFromCart,i=void 0!==s&&s,m=Object(n.useState)(!1),u=Object(l.a)(m,2),d=u[0],p=u[1],E=t?t.name:"No name",h=t?t.description:"Default",g=t?t.price:"default",v=function(){b(t,(function(){return p(!0)}))};return c.a.createElement("div",{className:"ourcard"},function(e){if(e)return c.a.createElement(o.a,{to:"/cart"})}(d),c.a.createElement("div",{className:"image"},c.a.createElement(f,{product:t})),c.a.createElement("div",{className:"right"},c.a.createElement("p",{className:"font-weight-bold name"},E),c.a.createElement("p",{className:"font-weight-normal text-success"},h),c.a.createElement("p",{className:"text-muted"},"\u20b9 ",g),c.a.createElement("div",{className:"row mt-2"},function(e){return e&&c.a.createElement("button",{onClick:v,className:"col-sm-8 btn rounded btn-sm btn-outline-primary add"},"Add to cart")}(r),function(e){return e&&c.a.createElement("button",{className:"col-sm-8 ml-2 btn btn-sm btn-outline-danger rounded"},"Remove from cart")}(i))))},v=function(){return fetch("".concat(s,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))};function N(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=(s[0],s[1]);return Object(n.useEffect)((function(){v().then((function(e){e.error?i(e.error):r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(p,{title:"Home Page"},console.log(a),a.map((function(e,t){return c.a.createElement("span",{key:t},c.a.createElement(g,{product:e}))}))))}var y=a(10),j=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(l.a)(e,2),a=t[0],o=t[1],i=a.name,m=a.email,u=a.password,d=a.error,f=a.success,b=function(e){return function(t){o(Object(E.a)(Object(E.a)({},a),{},Object(y.a)({error:!1},e,t.target.value)))}},h=function(e){var t;e.preventDefault(),o(Object(E.a)(Object(E.a)({},a),{},{error:!1})),(t={name:i,email:m,password:u},fetch("".concat(s,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?o(Object(E.a)(Object(E.a)({},a),{},{error:e.error})):o(Object(E.a)(Object(E.a)({},a),{},{name:"",email:"",password:"",error:"",success:!0}))})).catch((function(e){return console.log("signup ",e)}))};return c.a.createElement(p,{title:"Sign Up"},c.a.createElement("div",{className:"col-md-4 offset-md-4"},c.a.createElement("div",{style:{display:f?"":"none"},className:"alert alert-success"},"New account was created successfully. Please"," ",c.a.createElement(r.b,{to:"/signin"}," Login Here")),c.a.createElement("div",{style:{display:d?"":"none"},className:"alert alert-danger"},d)),c.a.createElement("div",{className:"col-md-4 offset-md-4"},c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Name"),c.a.createElement("input",{type:"text",autoFocus:!0,onChange:b("name"),className:"form-control",value:i})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",onChange:b("email"),className:"form-control",value:m})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",onChange:b("password"),className:"form-control",value:u})),c.a.createElement("button",{onClick:h,className:"btn btn-primary btn-block mt-4 rounded-pill"},"Sign Up"))))};a(34);function O(){return c.a.createElement("div",{className:"loading"},c.a.createElement("div",{className:"load-wrapp"},c.a.createElement("div",{className:"load-3"},c.a.createElement("div",{className:"line"}),c.a.createElement("div",{className:"line"}),c.a.createElement("div",{className:"line"}))))}var x=a(22),w=a.n(x),k=function(){var e=Object(n.useState)({email:"test@test.com",password:"1234",error:"",loading:!1,didRedirect:!1}),t=Object(l.a)(e,2),a=t[0],r=t[1],m=a.email,u=a.password,d=a.error,f=a.loading,b=a.didRedirect,h=i().user,g=function(e){return function(t){r(Object(E.a)(Object(E.a)({},a),{},Object(y.a)({error:!1},e,t.target.value)))}},v=function(e){e.preventDefault(),r(Object(E.a)(Object(E.a)({},a),{},{error:!1,loading:!0})),function(e){return fetch("".concat(s,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:m,password:u}).then((function(e){e.error?setTimeout((function(){r(Object(E.a)(Object(E.a)({},a),{},{error:e.error,loading:!1}))}),400):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){setTimeout((function(){r(Object(E.a)(Object(E.a)({},a),{},{didRedirect:!0}))}),400)}))})).catch((function(e){return console.log("abs")}))};return c.a.createElement(p,{title:"Sign In"},f&&c.a.createElement(O,null),c.a.createElement("img",{src:w.a,className:"login"}),c.a.createElement("div",{className:"col-md-4 offset-md-4"},c.a.createElement("div",{style:{display:d?"":"none"},className:"alert alert-danger"},d)),c.a.createElement("div",{className:"col-md-4 offset-md-4"},c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{onChange:g("email"),value:m,type:"email",autoFocus:!0,className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Password"),c.a.createElement("input",{onChange:g("password"),value:u,type:"password",className:"form-control"})),c.a.createElement("button",{onClick:v,className:"btn btn-primary btn-block mt-4 rounded-pill"},"Login"))),b?h&&1===h.role?c.a.createElement(o.a,{to:"/admin/dashboard"}):c.a.createElement(o.a,{to:"/user/dashboard"}):i()?c.a.createElement(o.a,{to:"/"}):void 0)},S=a(15),C=function(e){var t=e.component,a=Object(S.a)(e,["component"]);return c.a.createElement(o.b,Object.assign({},a,{render:function(e){return i()&&1===i().user.role?c.a.createElement(t,e):c.a.createElement(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},T=function(e){var t=e.component,a=Object(S.a)(e,["component"]);return c.a.createElement(o.b,Object.assign({},a,{render:function(e){return i()?c.a.createElement(t,e):c.a.createElement(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},P=a(9),D=a.n(P),A=a(12),I=function(e,t){return fetch("".concat(s,"/get/orders/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},_=function(){var e=i(),t=e.user,a=e.token,o=Object(n.useState)([]),s=Object(l.a)(o,2),m=s[0],u=s[1];function d(){return(d=Object(A.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t._id,a);case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){d.apply(this,arguments)}()}),[]);return c.a.createElement(p,{title:"UserDashBoard"},m?function(e){if(console.log(e),e)return c.a.createElement("table",{className:"table table-striped"},c.a.createElement("thead",{className:"text-center"},c.a.createElement("tr",null,c.a.createElement("th",null,"Order ID"),c.a.createElement("th",null,"Amount"),c.a.createElement("th",null,"Status"),c.a.createElement("th",null,"Order Created"))),c.a.createElement("tbody",null,e.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("div",{className:" text-center"},c.a.createElement(r.b,{key:t,to:"/"},c.a.createElement("h6",{className:"text-sm text-primary"},e._id)))),c.a.createElement("td",null,c.a.createElement("div",{className:" text-center"},c.a.createElement("h6",{className:"text-sm text-primary"},e.amount/100))),c.a.createElement("td",null,c.a.createElement("div",{className:" text-center"},c.a.createElement("h6",{className:"text-sm text-primary "},e.status))),c.a.createElement("td",null,c.a.createElement("div",{className:" text-center"},c.a.createElement("h6",{className:"text-sm text-primary"},c.a.createElement("span",null,JSON.stringify(Date(e.createdAt)).slice(1,11))))))}))))}(m):c.a.createElement("div",{className:"alert-danger"},"No orders placed"))},F=(a(36),a(23)),J=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=(s[0],s[1]),m=Object(n.useState)(""),u=Object(l.a)(m,2);u[0],u[1];Object(n.useEffect)((function(){v().then((function(e){e.error?i(e.error):r(e)}))}),[]);return c.a.createElement("div",{style:{background:"#eaf0f1"}},a.map((function(e,t){return c.a.createElement("div",{key:t,className:"chart"},c.a.createElement(F.a,{className:"chartdiv",width:"400px",height:"200px",chartType:"PieChart",loader:c.a.createElement("div",null,"Loading Chart"),data:[["Sales","".concat(e.name)],["Sold",e.sold],["In-Stock",e.stock]],options:{title:"".concat(e.name),is3D:!0},rootProps:{"data-testid":"2"}}))})))},R=function(){var e=i().user;e.name,e.email,e.role;return c.a.createElement(p,{title:"Welcome to Admin Dashboard",className:"container p-2"},c.a.createElement("div",{className:"row mt-5"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card text-center"},c.a.createElement("h5",{className:"card-header text-primary bg-dark text-warning border border-primary"},"Admin navigation"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement(r.b,{to:"/admin/create/category",className:"nav-link text-success"},"Create Categories")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(r.b,{to:"/admin/categories",className:"nav-link text-success"},"Manage Categories")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(r.b,{to:"/admin/create/product",className:"nav-link text-success"},"Create Product")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(r.b,{to:"/admin/products",className:"nav-link text-success"},"Manage Products")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(r.b,{to:"/admin/orders",className:"nav-link text-success"},"Manage Orders"))))),c.a.createElement("div",{className:"col-7"},c.a.createElement(J,null))))},B=function(){return fetch("".concat(s,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},z=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),m=Object(l.a)(o,2),u=m[0],d=m[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),b=E[0],h=E[1],g=i(),v=g.user,N=g.token,y=function(e){d(""),r(e.target.value)},j=function(e){e.preventDefault(),d(""),h(!1),function(e,t,a){return fetch("".concat(s,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(v._id,N,{name:a}).then((function(e){e.error?d(e.error):(d(""),h(!0),r(""))})).catch()};return c.a.createElement(p,{title:"Create Category"},c.a.createElement("div",{className:"col-md-8 bg-white offset-md-2 border"},c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center pt-3"},c.a.createElement("div",{style:{display:b?"":"none"},className:"alert alert-success"},"New Category was created successfully."),c.a.createElement("div",{style:{display:u?"":"none"},className:"alert alert-danger"},"Failed to create Category !")),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group p-4 "},c.a.createElement("p",{className:"lead"},"Enter the Category"),c.a.createElement("input",{type:"text",className:"form-control my-3",autoFocus:!0,required:!0,onChange:y,value:a,placeholder:"For Ex. Best selling Phones "}),c.a.createElement("button",{className:"btn btn-primary rounded",onClick:j},"Create Category")))))},U=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),m=Object(l.a)(s,2),u=m[0],d=(m[1],i());d.user,d.token;Object(n.useEffect)((function(){B().then((function(e){e.error?console.log(e.error):o(e)})).catch()}),[]);return c.a.createElement(p,{title:"Manage Categories"},u&&c.a.createElement(O,null),c.a.createElement("div",{className:"row col-md-8 offset-md-2"},c.a.createElement("h4",{className:"text-center text-dark my-3 col-12"},"Total ",a.length," categories"),c.a.createElement("table",{className:"table table-striped"},c.a.createElement("tbody",null,a.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement("div",{className:"row text-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h5",{className:"text-sm text-primary text-left ml-5 mt-2"},e.name)),c.a.createElement("div",{className:"col-4 pt-1"},c.a.createElement(r.b,{className:"btn btn-sm btn-success rounded",to:"/admin/category/update/".concat(e._id)},c.a.createElement("span",{className:""},"Update"))))))}))))))},q=function(){var e=i(),t=e.user,a=e.token,r=Object(n.useState)({name:"",description:"",price:"",stock:"",photo:"",categories:[],category:"",loading:!1,error:"",createdProduct:"",getaRedirect:!1,formData:""}),o=Object(l.a)(r,2),m=o[0],u=o[1],d=m.name,f=m.description,b=m.stock,h=m.price,g=m.photo,v=m.categories,N=(m.category,m.loading),j=m.error,x=m.createdProduct,w=(m.getaRedirect,m.formData);Object(n.useEffect)((function(){B().then((function(e){e.error?u(Object(E.a)(Object(E.a)({},m),{},{error:e.error})):u(Object(E.a)(Object(E.a)({},m),{},{categories:e,formData:new FormData}))})).catch()}),[]);var k=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;w.set(e,a),u(Object(E.a)(Object(E.a)({},m),{},Object(y.a)({},e,a)))}},S=function(e){e.preventDefault(),u(Object(E.a)(Object(E.a)({},m),{},{error:"",loading:!0})),function(e,t,a){return fetch("".concat(s,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(t._id,a,w).then((function(e){console.log(e),e.error?setTimeout((function(){u(Object(E.a)(Object(E.a)({},m),{},{error:e.error,loading:!1}))}),400):setTimeout((function(){u(Object(E.a)(Object(E.a)({},m),{},{name:"",description:"",price:"",photo:"",stock:"",formData:"",loading:!1,createdProduct:e.product.name}))}),400)})).catch()};return c.a.createElement(p,{title:"Add Product to DataBase"},N&&c.a.createElement(O,null),c.a.createElement("div",{className:"col-md-8 bg-white offset-md-2 border"},c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center pt-3"},(console.log(x),c.a.createElement("div",{style:{display:x?"":"none"},className:"alert alert-success"},x," created Successfully !!!")),c.a.createElement("div",{style:{display:j?"":"none"},className:"alert alert-danger"},"Failed to create Product !")),c.a.createElement("form",{className:"pb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3 offset-2"},c.a.createElement("span",{className:"text"},"Post photo")),c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-primary"},c.a.createElement("input",{onChange:k("photo"),type:"file",name:g,accept:"image",placeholder:"choose a file"}))))),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:k("name"),name:d,className:"form-control",placeholder:"Name",value:d})),c.a.createElement("div",{className:"form-group"},c.a.createElement("textarea",{onChange:k("description"),name:f,className:"form-control",placeholder:"Description",value:f})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:k("price"),type:"number",className:"form-control",placeholder:"Price",value:h})),c.a.createElement("div",{className:"form-group"},c.a.createElement("select",{onChange:k("category"),className:"form-control",placeholder:"Category"},c.a.createElement("option",null,"Select"),v&&v.map((function(e,t){return c.a.createElement("option",{className:"p-2",key:t,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:k("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:b})),c.a.createElement("button",{type:"submit",onClick:S,className:"btn btn-outline-primary rounded"},"Create Product"))))},G=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],m=Object(n.useState)(!1),u=Object(l.a)(m,2),d=u[0],f=u[1],E=i(),b=E.user,h=E.token,g=function(){fetch("".concat(s,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):o(e)})).catch()};Object(n.useEffect)((function(){g()}),[]);var v=function(e){f(!0),function(e,t,a){return fetch("".concat(s,"/product/").concat(a,"/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return console.log("backend",e),e.json()})).catch((function(e){console.log("BACk err",e)}))}(b._id,h,e).then((function(e){e.error?(console.log(e.error),setTimeout((function(){f(!1)}),400)):(setTimeout((function(){f(!1)}),400),g())})).catch((function(e){return console.log(e)}))};return c.a.createElement(p,{title:"Manage Products"},d&&c.a.createElement(O,null),c.a.createElement("div",{className:"row col-md-8 offset-md-2"},c.a.createElement("h4",{className:"text-center text-dark my-3 col-12"},"Total ",a.length," products"),c.a.createElement("table",{className:"table table-striped"},c.a.createElement("tbody",null,a.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement("div",{className:"row text-center"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h5",{className:"text-sm text-primary text-left ml-5 mt-2"},e.name)),c.a.createElement("div",{className:"col-4 pt-1"},c.a.createElement(r.b,{className:"btn btn-sm btn-success rounded",to:"/admin/product/update/".concat(e._id)},c.a.createElement("span",{className:""},"Update"))),c.a.createElement("div",{className:"col-4 pt-1"},c.a.createElement("button",{onClick:function(){v(e._id)},className:" btn btn-sm btn-danger rounded"},"Delete")))))}))))))},M=function(e){var t=e.match,a=i(),r=a.user,o=a.token,m=Object(n.useState)({name:"",description:"",price:"",stock:"",photo:"",categories:[],category:"",loading:!1,error:"",createdProduct:"",getaRedirect:!1,formData:""}),u=Object(l.a)(m,2),d=u[0],f=u[1],b=d.name,h=d.description,g=d.stock,v=d.price,N=d.photo,j=d.categories,x=(d.category,d.loading),w=d.error,k=d.createdProduct,S=(d.getaRedirect,d.formData),C=function(e){(function(e){return fetch("".concat(s,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?f(Object(E.a)(Object(E.a)({},d),{},{error:e.error})):(T(),f(Object(E.a)(Object(E.a)({},d),{},{name:e.name,description:e.description,price:e.price,category:e.category,stock:e.stock,formData:new FormData})))})).catch()},T=function(){B().then((function(e){e.error?f(Object(E.a)(Object(E.a)({},d),{},{error:e.error})):f({categories:e,formData:new FormData})})).catch()};Object(n.useEffect)((function(){C(t.params.productId)}),[]);var P=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;S.set(e,a),f(Object(E.a)(Object(E.a)({},d),{},Object(y.a)({},e,a)))}},D=function(e){e.preventDefault(),f(Object(E.a)(Object(E.a)({},d),{},{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(s,"/product/").concat(n,"/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(r._id,o,S,t.params.productId).then((function(e){e.error?setTimeout((function(){f(Object(E.a)(Object(E.a)({},d),{},{error:e.error,loading:!1}))}),400):setTimeout((function(){f(Object(E.a)(Object(E.a)({},d),{},{name:"",description:"",price:"",photo:"",stock:"",formData:"",loading:!1,createdProduct:e.product.name}))}),400)})).catch()};return c.a.createElement(p,{title:"Update product details"},x&&c.a.createElement(O,null),c.a.createElement("div",{className:"col-md-8 bg-white offset-md-2 border"},c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center pt-3"},c.a.createElement("div",{style:{display:k?"":"none"},className:"alert alert-success"},k," updated Successfully !!!"),c.a.createElement("div",{style:{display:w?"":"none"},className:"alert alert-danger"},"Failed to create Product !")),c.a.createElement("form",{className:"pb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3 offset-2"},c.a.createElement("span",{className:"text"},"Post photo")),c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-primary"},c.a.createElement("input",{onChange:P("photo"),type:"file",name:N,accept:"image",placeholder:"choose a file"}))))),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:P("name"),className:"form-control",placeholder:"Name",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("textarea",{onChange:P("description"),className:"form-control",placeholder:"Description",value:h})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:P("price"),type:"number",className:"form-control",placeholder:"Price",value:v})),c.a.createElement("div",{className:"form-group"},c.a.createElement("select",{onChange:P("category"),className:"form-control",placeholder:"Category"},c.a.createElement("option",null,"select"),j&&j.map((function(e,t){return c.a.createElement("option",{className:"p-2",key:t,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{onChange:P("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:g})),c.a.createElement("button",{type:"submit",onClick:D,className:"btn btn-outline-primary rounded"},"Update Product"))))},L=function(e){var t=e.match,a=i(),r=a.user,o=a.token,m=Object(n.useState)({category:"",error:"",success:"",loading:""}),u=Object(l.a)(m,2),d=u[0],f=u[1],b=d.category,h=d.error,g=d.success,v=d.loading,N=function(e){(function(e){return fetch("".concat(s,"/category/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?f(Object(E.a)(Object(E.a)({},d),{},{error:e.error})):f(Object(E.a)(Object(E.a)({},d),{},{category:e.name}))})).catch()};Object(n.useEffect)((function(){N(t.params.categoryId)}),[]);var y=function(e){f(Object(E.a)(Object(E.a)({},d),{},{category:e.target.value}))},j=function(e){e.preventDefault(),f(Object(E.a)(Object(E.a)({},d),{},{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(s,"/category/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.categoryId,r._id,o,{name:b}).then((function(e){e.error?setTimeout((function(){f(Object(E.a)(Object(E.a)({},d),{},{error:e.error,loading:!1}))}),400):setTimeout((function(){f(Object(E.a)(Object(E.a)({},d),{},{success:!0,loading:!1}))}),400)})).catch()};return c.a.createElement(p,{title:"Update category"},v&&c.a.createElement(O,null),c.a.createElement("div",{className:"col-md-8 bg-white offset-md-2 border pt-3"},c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center pt-3"},c.a.createElement("div",{style:{display:g?"":"none"},className:"alert alert-success"},"Category updated Successfully !!!"),c.a.createElement("div",{style:{display:h?"":"none"},className:"alert alert-danger"},"Failed to update category !")),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group "},c.a.createElement("p",{className:"lead"},"Enter the Category"),c.a.createElement("input",{type:"text",className:"form-control my-3",autoFocus:!0,required:!0,onChange:y,value:b,placeholder:"For Ex. Best selling Phones "}),c.a.createElement("button",{className:"btn btn-primary rounded",onClick:j},"Update Category")))))},H=(a(37),function(e){var t=e.product,a=e.addToCart,r=void 0===a||a,s=e.removeFromCart,i=void 0!==s&&s,m=e.setReload,u=void 0===m?function(e){return e}:m,d=e.reload,p=void 0===d?void 0:d,E=Object(n.useState)(!1),h=Object(l.a)(E,2),g=h[0],v=h[1],N=Object(n.useState)(1),y=Object(l.a)(N,2),j=y[0],O=y[1],x=t?t.name:"No name",w=t?t.description:"Default",k=t?t.price:"default";t.quantity=j,t.totalPrice=k*j;var S=function(){b(t,(function(){return v(!0)}))};return c.a.createElement("div",{className:"ourcard1"},function(e){if(e)return c.a.createElement(o.a,{to:"/cart"})}(g),c.a.createElement("div",{className:"image1 col-1"},c.a.createElement(f,{product:t})),c.a.createElement("div",{className:"right1"},c.a.createElement("p",{className:"font-weight-bold name1"},x),c.a.createElement("p",{className:"font-weight-normal text-success desc1"},w),c.a.createElement("div",{className:"row mt-2"},function(e){return e&&c.a.createElement("button",{onClick:S,className:"col-sm-8 btn rounded btn-sm btn-outline-primary"},"Add to cart")}(r),function(e){return e&&c.a.createElement("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),u(!p)},className:"remove col-sm-8 ml-2 btn btn-sm btn-outline-danger rounded"},"Remove from cart")}(i))),c.a.createElement("div",{className:"delivery"},"Expected delivery",c.a.createElement("p",{className:"text text-success"},"Sat Jun 13 2020")),c.a.createElement("div",{className:"price"},c.a.createElement("span",{className:""},"Price"),c.a.createElement("p",{className:"text-success"},"\u20b9 ",k*j)),c.a.createElement("div",{className:"quantity row"},c.a.createElement("i",{className:"fa fa-minus pl-3 iconm","aria-hidden":"true",onClick:function(){j>1&&(u(!p),O(j-1))}}),c.a.createElement("span",{className:"text-center pl-2"},j),c.a.createElement("i",{className:"fa fa-plus pl-2 iconp","aria-hidden":"true",onClick:function(){u(!p),O(j+1)}})))}),Q=function(e,t,a){return fetch("".concat(s,"/razorpay/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({amount:e})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},K=(a(38),function(e,t,a){return fetch("".concat(s,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}),V=function(e,t,a){return fetch("".concat(s,"/").concat(e,"/").concat(a),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))};function Y(e){var t=e.match.params.orderId,a=i(),r=a.user,o=a.token,s=Object(n.useState)({}),m=Object(l.a)(s,2),u=m[0],d=m[1];function f(){return(f=Object(A.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(r._id,o,t);case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]);return c.a.createElement(p,{title:"Order placed successfully"},c.a.createElement("div",{className:""},function(){if(console.log(u),u)return c.a.createElement("div",{className:"col-8 offset-2 "},c.a.createElement("h4",{className:"bg-primary text-white rounded text-center full-width"},c.a.createElement("b",null,"Invoice ")),c.a.createElement("ul",null,c.a.createElement("li",null,"Transaction ID : ",u.transaction_id),c.a.createElement("li",null,"Name : ",c.a.createElement("span",null,r.name)," "),c.a.createElement("li",null,"Email : ",c.a.createElement("span",null,r.email)," "),c.a.createElement("li",null,"Total Amount : Rs"," ",c.a.createElement("span",{id:"final_invoice_price"},u.amount/100))),c.a.createElement("h4",{className:"bg-primary text-white text-center rounded"},c.a.createElement("b",null,"Order Details")),c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Sr.No."),c.a.createElement("th",{scope:"col"},"Name"),c.a.createElement("th",{scope:"col"},"Quantity"),c.a.createElement("th",{scope:"col"},"Price"))),c.a.createElement("tbody",null,u.products&&u.products.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("th",null,t+1),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity),c.a.createElement("td",null,e.price*e.quantity))})),c.a.createElement("tr",{className:"bg-white"},c.a.createElement("th",{scope:"row"}),c.a.createElement("td",null),c.a.createElement("td",null,"Total"),c.a.createElement("td",null,u.amount/100)))),c.a.createElement("ul",null))}()))}var W=function(){return new Promise((function(e){var t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=function(){e(!0)},t.onerror=function(){e(!1)},document.body.appendChild(t)}))},X=function(e){var t=e.products,a=e.setReload,s=void 0===a?function(e){return e}:a,m=e.reload,u=void 0===m?void 0:m,d=e.setLoading,p=void 0===d?function(e){return e}:d,f=(e.loading,Object(n.useState)({success:!1,error:!1,didRedirect:!1,address:""})),b=Object(l.a)(f,2),g=b[0],v=b[1],N=Object(n.useState)(),y=Object(l.a)(N,2),j=y[0],O=y[1],x=(g.success,g.error,g.didRedirect,Object(n.useState)(0)),w=Object(l.a)(x,2),k=w[0],S=w[1];function C(){return(C=Object(A.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,W();case 3:if(e.sent){e.next=7;break}return alert("Payment sdk failed to load, check ur network"),e.abrupt("return");case 7:return e.next=9,Q(100*k,P,T);case 9:a=e.sent,n={key:"rzp_test_3PYkwvoil834qD",amount:a.amount,currency:a.currency,order_id:a.id,name:"Mobile Store",description:"Test Transaction",handler:function(){var e=Object(A.a)(D.a.mark((function e(n){var c,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(Object(E.a)(Object(E.a)({},g),{},{success:!0})),s(!u),c={products:t,transaction_id:n.razorpay_payment_id,amount:a.amount},e.next=5,K(P,T,c);case 5:r=e.sent,h(),p(!1),O(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),prefill:{name:"Vivek Kamble"}},new window.Razorpay(n).open();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){var e=0;t.map((function(t){e+=t.totalPrice})),S(e)}()}),[t]);i()&&i().user;var T=i()&&i().token,P=i()&&i().user._id;return c.a.createElement("div",{className:"check-container"},c.a.createElement("h5",{className:"finalamount"},"Final Amount :",c.a.createElement("span",{className:"text-success"},"\u20b9 ",k)),i()?c.a.createElement("button",{className:"btn btn-success rounded",onClick:function(){!function(){C.apply(this,arguments)}()}},"Proceed for payment"):c.a.createElement("span",null,c.a.createElement("p",{className:"text-danger signin"},"Please Sign in to proceed order"),c.a.createElement(r.b,{to:"/signin"},c.a.createElement("button",{className:"btn mt-4 rounded btn-primary"},"Sign In"))),function(e){if(e)return console.log(e),c.a.createElement(o.a,{to:"user/order/success/".concat(e._id)})}(j||null))};function Z(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=(s[0],s[1],Object(n.useState)(!1)),m=Object(l.a)(i,2),u=m[0],d=m[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),b=E[0],h=E[1];Object(n.useEffect)((function(){r(function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))}())}),[u]);return c.a.createElement("div",null,c.a.createElement(p,{title:"Cart"},b&&c.a.createElement(O,null),c.a.createElement("div",{className:"row"},a.length<=0?c.a.createElement("div",{className:"alert alert-danger col-8 offset-2 text-center"},"Your cart is Empty"):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-9"},function(e){return c.a.createElement("div",null,e.map((function(e,t){return c.a.createElement(H,{key:t,product:e,addToCart:!1,removeFromCart:!0,reload:u,setReload:d,setLoading:h,loading:b})})))}(a)),c.a.createElement("div",{className:"col-3"},c.a.createElement(X,{products:a,setReload:d,reload:u,setLoading:h,loading:b}))))))}var $=function(e){e.match;return c.a.createElement(r.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/",exact:!0,component:N}),c.a.createElement(o.b,{path:"/signup",exact:!0,component:j}),c.a.createElement(o.b,{path:"/signin",exact:!0,component:k}),c.a.createElement(o.b,{path:"/cart",exact:!0,component:Z}),c.a.createElement(T,{path:"/user/dashboard",exact:!0,component:_}),c.a.createElement(T,{path:"/user/order/success/:orderId",exact:!0,component:Y}),c.a.createElement(C,{path:"/admin/dashboard",exact:!0,component:R}),c.a.createElement(C,{path:"/admin/categories",exact:!0,component:U}),c.a.createElement(C,{path:"/admin/create/category",exact:!0,component:z}),c.a.createElement(C,{path:"/admin/create/product",exact:!0,component:q}),c.a.createElement(C,{path:"/admin/products",exact:!0,component:G}),c.a.createElement(C,{path:"/admin/product/update/:productId",exact:!0,component:M}),c.a.createElement(C,{path:"/admin/category/update/:categoryId",exact:!0,component:L})))},ee=a(25);a.n(ee).a.render(c.a.createElement($,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.931ff38c.chunk.js.map